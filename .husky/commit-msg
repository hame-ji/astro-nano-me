#!/usr/bin/env sh

commit_msg_file="$1"
commit_msg="$(cat "$commit_msg_file")"

pattern='^(build|chore|ci|docs|feat|fix|perf|refactor|revert|style|test)(\([a-z0-9._-]+\))?!?: .+'

if ! printf "%s" "$commit_msg" | grep -Eq "$pattern"; then
  echo "Invalid commit message."
  echo "Use Conventional Commits, e.g. feat(auth): add login route"
  exit 1
fi
